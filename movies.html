<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MyFlex - Movies</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* –°—Ç–∏–ª–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π */
    .toast-message {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background: rgba(26, 26, 26, 0.95);
        color: white;
        padding: 15px 25px;
        border-radius: 10px;
        z-index: 10000;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        border-left: 4px solid #28a745;
        max-width: 300px;
        animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    
    .toast-message.error {
        border-left-color: #ff4444;
    }
    
    .toast-message.info {
        border-left-color: #17a2b8;
    }
    
    /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–µ—Ç–∞–ª–µ–π —Ñ–∏–ª—å–º–∞ */
    .movie-details-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.9);
      z-index: 9999;
      overflow-y: auto;
    }
    
    .movie-details-content {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      max-width: 900px;
      margin: 50px auto;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.5);
      border: 1px solid #ff4444;
    }
    
    .movie-details-header {
      display: flex;
      gap: 30px;
      margin-bottom: 30px;
    }
    
    .movie-details-poster {
      flex: 0 0 300px;
    }
    
    .movie-details-poster img {
      width: 100%;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }
    
    .movie-details-info {
      flex: 1;
    }
    
    .movie-title {
      font-size: 2.5rem;
      margin-bottom: 10px;
      color: #fff;
    }
    
    .movie-meta {
      color: #aaa;
      margin-bottom: 20px;
    }
    
    .movie-rating-badge {
      background: #ffcc00;
      color: #000;
      padding: 5px 15px;
      border-radius: 20px;
      font-weight: bold;
      display: inline-block;
      margin-bottom: 20px;
    }
    
    .movie-description {
      margin-bottom: 30px;
      line-height: 1.6;
    }
    
    .movie-actors {
      margin-bottom: 30px;
    }
    
    .actors-title {
      color: #ff4444;
      margin-bottom: 10px;
    }
    
    .actors-list {
      color: #ccc;
    }
    
    .movie-actions {
      display: flex;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }
    
    .close-details-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      background: none;
      border: none;
      color: white;
      font-size: 2rem;
      cursor: pointer;
      z-index: 10000;
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ */
    .media-card.active {
      transform: scale(1.05);
      box-shadow: 0 15px 30px rgba(255, 68, 68, 0.4) !important;
      border: 2px solid #ff4444;
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Ç—Ä–µ–π–ª–µ—Ä–∞ –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    .trailer-btn-inside {
      margin-top: 10px;
      width: 100%;
    }
    
    /* –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –æ–ø–∏—Å–∞–Ω–∏—è */
    .details-btn {
      background: #6c757d;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 10px;
      width: 100%;
    }
    
    .details-btn:hover {
      background: #ff4444;
    }
    
    /* –°–¢–ò–õ–ò –î–õ–Ø –°–ò–°–¢–ï–ú–´ –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ï–í (–î–û–ë–ê–í–õ–ï–ù–û) */
    .comments-section {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #444;
    }
    
    .comments-title {
      color: #ff4444;
      margin-bottom: 20px;
      font-size: 1.5rem;
    }
    
    .comment-form {
      margin-bottom: 30px;
    }
    
    .comment-input {
      width: 100%;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #444;
      background: rgba(255, 255, 255, 0.1);
      color: white;
      font-size: 1rem;
      margin-bottom: 10px;
      resize: vertical;
      min-height: 100px;
    }
    
    .comment-input:focus {
      outline: none;
      border-color: #ff4444;
    }
    
    .submit-comment-btn {
      background: #ff4444;
      color: white;
      border: none;
      padding: 10px 25px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.3s;
    }
    
    .submit-comment-btn:hover {
      background: #ff3333;
    }
    
    .comments-list {
      margin-top: 20px;
    }
    
    .comment-item {
      background: rgba(255, 255, 255, 0.08);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 15px;
      border-left: 3px solid #ff4444;
    }
    
    .comment-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .comment-author {
      font-weight: bold;
      color: #ffcc00;
    }
    
    .comment-date {
      color: #aaa;
      font-size: 0.9rem;
    }
    
    .comment-actions {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    
    .edit-comment-btn,
    .delete-comment-btn {
      background: none;
      border: none;
      color: #aaa;
      cursor: pointer;
      font-size: 0.9rem;
      padding: 5px 10px;
      border-radius: 3px;
      transition: all 0.3s;
    }
    
    .edit-comment-btn:hover {
      color: #4CAF50;
      background: rgba(76, 175, 80, 0.1);
    }
    
    .delete-comment-btn:hover {
      color: #ff4444;
      background: rgba(255, 68, 68, 0.1);
    }
    
    .comment-text {
      line-height: 1.5;
      color: #ddd;
    }
    
    .edit-comment-input {
      width: 100%;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #444;
      background: rgba(255, 255, 255, 0.1);
      color: white;
      font-size: 1rem;
      margin-bottom: 10px;
      resize: vertical;
      min-height: 80px;
    }
    
    .no-comments {
      text-align: center;
      color: #888;
      font-style: italic;
      padding: 20px;
    }
    
    .login-to-comment {
      text-align: center;
      padding: 20px;
      color: #ffcc00;
    }
    
    .login-to-comment a {
      color: #ff4444;
      text-decoration: none;
    }
    
    .login-to-comment a:hover {
      text-decoration: underline;
    }
    
    /* –ö–Ω–æ–ø–∫–∞ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –¥–µ—Ç–∞–ª—è—Ö —Ñ–∏–ª—å–º–∞ */
    .comments-btn {
      background: #17a2b8;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }
    
    .comments-btn:hover {
      background: #138496;
    }
    
    /* –ê–≤–∞—Ç–∞—Ä–∫–∏ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ */
    .comment-author-avatar {
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .avatar-icon {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: linear-gradient(45deg, #ff4444, #ff9966);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π */
    .comment-item.other-user {
      border-left-color: #17a2b8;
    }
    
    .comment-item.current-user {
      border-left-color: #ff4444;
    }
    
    /* –ò–∫–æ–Ω–∫–∏ –ª–∞–π–∫–æ–≤ */
    .like-btn {
      background: none;
      border: none;
      color: #aaa;
      cursor: pointer;
      font-size: 0.9rem;
      padding: 3px 8px;
      border-radius: 3px;
      transition: all 0.3s;
    }
    
    .like-btn:hover {
      color: #ff4444;
    }
    
    .like-btn.liked {
      color: #ff4444;
    }
    
    .likes-count {
      margin-left: 5px;
      font-size: 0.9rem;
    }
  </style>
</head>

<body class="text-white d-flex flex-column min-vh-100 bg-theme-4">
  <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã -->
  <button id="theme-toggle" aria-label="Toggle theme" class="theme-toggle-btn">üåô</button>

  <!-- –•–µ–¥–µ—Ä —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π -->
  <header class="py-3 border-bottom border-secondary main-header">
    <div class="container-fluid d-flex justify-content-between align-items-center px-4 px-lg-5">
      <div class="header-logo">
        <a href="index.html">
          <img 
            src="images/logo.jpg" 
            data-light="images/whitelogo.jpg" 
            alt="MyFlex Logo" 
            class="logo-img" 
          />
        </a>
      </div>

      <nav class="navbar navbar-expand-lg navbar-dark p-0" aria-label="Main Navigation">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav gap-2 gap-lg-4 align-items-center">
            <li class="nav-item"><a class="nav-link text-white" href="index.html">Home</a></li>
            <li class="nav-item"><a class="nav-link active text-danger" aria-current="page" href="movies.html">Movies</a></li>
            <li class="nav-item"><a class="nav-link text-white" href="news.html">News</a></li>
            <li class="nav-item"><a class="nav-link text-white" href="contact.html">Contact</a></li>
            <li class="nav-item"><a class="nav-link text-white" href="favorites.html">Favorites</a></li>
            <!-- –ö–Ω–æ–ø–∫–∏ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–æ—Ñ–∏–ª—è -->
            <button class="btn btn-danger nav-button px-3" id="openAccessModal">Sign Up</button>
            <button class="btn btn-success nav-button px-3" id="profileBtn" style="display: none;">
                <i class="fas fa-user"></i>
            </button>
          </ul>
        </div>
      </nav>
    </div>
  </header>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–µ—Ç–∞–ª–µ–π —Ñ–∏–ª—å–º–∞ -->
  <div id="movieDetailsModal" class="movie-details-modal">
    <button class="close-details-btn" id="closeDetailsModal">&times;</button>
    <div class="movie-details-content" id="movieDetailsContent">
      <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JavaScript -->
    </div>
  </div>

  <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ï–í (–î–û–ë–ê–í–õ–ï–ù–û) -->
  <div id="commentsModal" class="movie-details-modal">
    <button class="close-details-btn" id="closeCommentsModal">&times;</button>
    <div class="movie-details-content" id="commentsContent">
      <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
    </div>
  </div>

  <main class="flex-grow-1 py-5 media-main-content">
    <div class="container px-4 px-lg-5">
      <h1 class="text-center mb-5 page-title">Movies</h1>
      
      <section class="filter-section mb-5" aria-label="Content filters">
        <div class="filter-header">
          <h2 class="filter-title">Content Filter</h2>
        </div>

        <div class="filter-controls-wrapper">
          <div class="filter-select-group" id="dropdown-filters">
            <select class="filter-select" id="filter-genres" data-filter-key="genres">
              <option value="">All Genres</option>
              <option value="action">Action</option>
              <option value="adventure">Adventure</option>
              <option value="animation">Animation</option>
              <option value="biography">Biography</option>
              <option value="comedy">Comedy</option>
              <option value="crime">Crime</option>
              <option value="drama">Drama</option>
              <option value="fantasy">Fantasy</option>
              <option value="history">History</option>
              <option value="sci-fi">Sci-Fi</option>
            </select>

            <select class="filter-select" id="filter-countries" data-filter-key="countries">
              <option value="">All Countries</option>
              <option value="usa">USA</option>
              <option value="uk">UK</option>
              <option value="russia">Russia</option>
              <option value="korea">Korea</option>
              <option value="turkey">Turkey</option>
            </select>

            <select class="filter-select" id="filter-years" data-filter-key="year">
              <option value="">All Years</option>
              <option value="2025">2025</option>
              <option value="2024">2024</option>
              <option value="2020s">2020 - 2029</option>
              <option value="2010s">2010 - 2019</option>
              <option value="2000s">2000 - 2009</option>
            </select>

            <select class="filter-select" id="filter-rating" data-filter-key="rating">
              <option value="">Any Rating</option>
              <option value="9+">9+</option>
              <option value="8+">8+</option>
              <option value="7+">7+</option>
              <option value="6+">6+</option>
            </select>
          </div>

          <button id="reset-filters-btn" class="reset-filters-btn">Reset Filters</button>
        </div>

        <div class="active-filters-wrapper">
          <strong>Active filters:</strong>
          <div id="active-filters-display" class="active-filters-display">
            <span id="no-filters-msg" class="no-filters-msg">No filters selected.</span>
          </div>
        </div>
      </section>

      <div class="search-section mb-4">
        <div class="search-wrapper">
          <input 
            type="text" 
            id="media-search" 
            class="search-input" 
            placeholder="Search movies..."
            aria-label="Search movies"
            autocomplete="off"
          >
          <ul id="search-suggestions" class="search-suggestions"></ul>
        </div>
      </div>

      <div class="media-list-container">
        <div class="row g-4 justify-content-center" id="media-list">
          
          <!-- –§–∏–ª—å–º 1: Avengers Endgame -->
          <div class="col-12 col-md-6 col-lg-4 col-xl-3">
            <div class="media-card rateable-card" 
                 data-movie-id="avengers-endgame" 
                 data-genres="action,adventure,sci-fi" 
                 data-countries="usa" 
                 data-year="2019" 
                 data-imdb-rating="8.4" 
                 data-trailer-key="TcMBFSGVi1c"
                 data-description="After the devastating events of Avengers: Infinity War (2018), the universe is in ruins. With the help of remaining allies, the Avengers assemble once more in order to reverse Thanos' actions and restore balance to the universe."
                 data-actors="Robert Downey Jr., Chris Evans, Mark Ruffalo, Chris Hemsworth, Scarlett Johansson, Jeremy Renner, Don Cheadle, Paul Rudd, Brie Larson, Karen Gillan, Danai Gurira, Bradley Cooper, Josh Brolin"
                 data-director="Anthony Russo, Joe Russo">
              <div class="media-card-image">
                <img src="https://upload.wikimedia.org/wikipedia/ru/thumb/0/0d/Avengers_Endgame_poster.jpg/640px-Avengers_Endgame_poster.jpg" alt="Avengers Endgame" class="media-img">
              </div>
              <div class="media-card-content">
                <h3 class="media-title">Avengers: Endgame (2019)</h3>
                <p class="media-director"><b>Director:</b> Anthony & Joe Russo</p>
                <p class="media-genre"><b>Genre:</b> Action, Adventure, Sci-Fi</p>
                <p class="media-plot">After the snap of Thanos, the Avengers must reunite to save everyone.</p>
                <p class="media-rating"><b>IMDb Rating:</b> ‚≠ê 8.4/10</p>
                
                <div class="user-rating">
                  <p class="user-rating-label">Your Rating:</p>
                  <div class="rating-stars">
                    <span class="star" data-value="1"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="2"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="3"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="4"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="5"><i class="fas fa-star"></i></span>
                  </div>
                  <p class="user-rating-message">Click a star to rate!</p>
                </div>
                
                <div class="media-card-actions">
                  <button class="details-btn open-movie-details">
                    <i class="fas fa-info-circle"></i> Movie Details
                  </button>
                  <button class="trailer-btn trailer-btn-inside" data-trailer-key="TcMBFSGVi1c">
                    <i class="fas fa-play"></i> Watch Trailer
                  </button>
                  <button class="favorite-btn" data-title="Avengers: Endgame" data-image="https://upload.wikimedia.org/wikipedia/ru/thumb/0/0d/Avengers_Endgame_poster.jpg/640px-Avengers_Endgame_poster.jpg">
                    <i class="far fa-heart"></i> Add to Favorite
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- –§–∏–ª—å–º 2: Dune -->
          <div class="col-12 col-md-6 col-lg-4 col-xl-3">
            <div class="media-card rateable-card" 
                 data-movie-id="dune" 
                 data-genres="adventure,drama,sci-fi" 
                 data-countries="usa" 
                 data-year="2021" 
                 data-imdb-rating="8.0" 
                 data-trailer-key="n9xhJrPXop4"
                 data-description="Paul Atreides, a brilliant and gifted young man born into a great destiny beyond his understanding, must travel to the most dangerous planet in the universe to ensure the future of his family and his people. As malevolent forces explode into conflict over the planet's exclusive supply of the most precious resource in existence, only those who can conquer their fear will survive."
                 data-actors="Timoth√©e Chalamet, Rebecca Ferguson, Oscar Isaac, Josh Brolin, Stellan Skarsg√•rd, Dave Bautista, Zendaya, Jason Momoa"
                 data-director="Denis Villeneuve">
              <div class="media-card-image">
                <img src="https://miro.medium.com/v2/resize:fit:736/1*lxJt3ijMD20kPvLtv_wkxw.jpeg" alt="Dune" class="media-img">
              </div>
              <div class="media-card-content">
                <h3 class="media-title">Dune (2021)</h3>
                <p class="media-director"><b>Director:</b> Denis Villeneuve</p>
                <p class="media-genre"><b>Genre:</b> Adventure, Drama, Sci-Fi</p>
                <p class="media-plot">Paul Atreides must survive on the desert planet Arrakis.</p>
                <p class="media-rating"><b>IMDb Rating:</b> ‚≠ê 8.0/10</p>
                
                <div class="user-rating">
                  <p class="user-rating-label">Your Rating:</p>
                  <div class="rating-stars">
                    <span class="star" data-value="1"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="2"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="3"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="4"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="5"><i class="fas fa-star"></i></span>
                  </div>
                  <p class="user-rating-message">Click a star to rate!</p>
                </div>
                
                <div class="media-card-actions">
                  <button class="details-btn open-movie-details">
                    <i class="fas fa-info-circle"></i> Movie Details
                  </button>
                  <button class="trailer-btn trailer-btn-inside" data-trailer-key="n9xhJrPXop4">
                    <i class="fas fa-play"></i> Watch Trailer
                  </button>
                  <button class="favorite-btn" data-title="Dune" data-image="https://miro.medium.com/v2/resize:fit:736/1*lxJt3ijMD20kPvLtv_wkxw.jpeg">
                    <i class="far fa-heart"></i> Add to Favorite
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- –§–∏–ª—å–º 3: Oppenheimer -->
          <div class="col-12 col-md-6 col-lg-4 col-xl-3">
            <div class="media-card rateable-card" 
                 data-movie-id="oppenheimer" 
                 data-genres="biography,drama,history" 
                 data-countries="usa,uk" 
                 data-year="2023" 
                 data-imdb-rating="8.6" 
                 data-trailer-key="uYPbbksJxIg"
                 data-description="The story of American scientist J. Robert Oppenheimer and his role in the development of the atomic bomb. The film portrays Oppenheimer's studies, his direction of the Manhattan Project during World War II, and his eventual fall from grace due to his 1954 security hearing."
                 data-actors="Cillian Murphy, Emily Blunt, Matt Damon, Robert Downey Jr., Florence Pugh, Josh Hartnett, Casey Affleck, Rami Malek, Kenneth Branagh"
                 data-director="Christopher Nolan">
              <div class="media-card-image">
                <img src="https://cdn-images-3.listennotes.com/podcasts/talking-talkies/oppenheimer-savior-or-GtE3CnZV5Nc-yBla_-9tjgn.1400x1400.jpg" alt="Oppenheimer" class="media-img">
              </div>
              <div class="media-card-content">
                <h3 class="media-title">Oppenheimer (2023)</h3>
                <p class="media-director"><b>Director:</b> Christopher Nolan</p>
                <p class="media-genre"><b>Genre:</b> Biography, Drama, History</p>
                <p class="media-plot">The story of J. Robert Oppenheimer and the atomic bomb.</p>
                <p class="media-rating"><b>IMDb Rating:</b> ‚≠ê 8.6/10</p>
                
                <div class="user-rating">
                  <p class="user-rating-label">Your Rating:</p>
                  <div class="rating-stars">
                    <span class="star" data-value="1"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="2"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="3"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="4"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="5"><i class="fas fa-star"></i></span>
                  </div>
                  <p class="user-rating-message">Click a star to rate!</p>
                </div>
                
                <div class="media-card-actions">
                  <button class="details-btn open-movie-details">
                    <i class="fas fa-info-circle"></i> Movie Details
                  </button>
                  <button class="trailer-btn trailer-btn-inside" data-trailer-key="uYPbbksJxIg">
                    <i class="fas fa-play"></i> Watch Trailer
                  </button>
                  <button class="favorite-btn" data-title="Oppenheimer" data-image="https://cdn-images-3.listennotes.com/podcasts/talking-talkies/oppenheimer-savior-or-GtE3CnZV5Nc-yBla_-9tjgn.1400x1400.jpg">
                    <i class="far fa-heart"></i> Add to Favorite
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- –§–∏–ª—å–º 4: Spider-Man -->
          <div class="col-12 col-md-6 col-lg-4 col-xl-3">
            <div class="media-card rateable-card" 
                 data-movie-id="spider-man" 
                 data-genres="animation,action,adventure" 
                 data-countries="usa" 
                 data-year="2023" 
                 data-imdb-rating="8.7" 
                 data-trailer-key="cqGjhVJWtEg"
                 data-description="Miles Morales returns for the next chapter of the Oscar¬Æ-winning Spider-Verse saga. After reuniting with Gwen Stacy, Brooklyn's full-time, friendly neighborhood Spider-Man is catapulted across the Multiverse, where he encounters a team of Spider-People charged with protecting its very existence. But when the heroes clash on how to handle a new threat, Miles finds himself pitted against the other Spiders and must redefine what it means to be a hero."
                 data-actors="Shameik Moore, Hailee Steinfeld, Brian Tyree Henry, Luna Lauren V√©lez, Jake Johnson, Jason Schwartzman, Issa Rae, Karan Soni, Daniel Kaluuya"
                 data-director="Joaquim Dos Santos, Kemp Powers, Justin K. Thompson">
              <div class="media-card-image">
                <img src="https://avatars.mds.yandex.net/i?id=1c8f589b8867a0641f2f3ce362a2a952031de2f0-5273802-images-thumbs&n=13" alt="Spider-Man: Across the Spider-Verse" class="media-img">
              </div>
              <div class="media-card-content">
                <h3 class="media-title">Spider-Man: Across the Spider-Verse (2023)</h3>
                <p class="media-director"><b>Director:</b> Joaquim Dos Santos, Kemp Powers, Justin K. Thompson</p>
                <p class="media-genre"><b>Genre:</b> Animation, Action, Adventure</p>
                <p class="media-plot">Miles Morales travels across the multiverse to face a new threat.</p>
                <p class="media-rating"><b>IMDb Rating:</b> ‚≠ê 8.7/10</p>
                
                <div class="user-rating">
                  <p class="user-rating-label">Your Rating:</p>
                  <div class="rating-stars">
                    <span class="star" data-value="1"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="2"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="3"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="4"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="5"><i class="fas fa-star"></i></span>
                  </div>
                  <p class="user-rating-message">Click a star to rate!</p>
                </div>
                
                <div class="media-card-actions">
                  <button class="details-btn open-movie-details">
                    <i class="fas fa-info-circle"></i> Movie Details
                  </button>
                  <button class="trailer-btn trailer-btn-inside" data-trailer-key="cqGjhVJWtEg">
                    <i class="fas fa-play"></i> Watch Trailer
                  </button>
                  <button class="favorite-btn" data-title="Spider-Man: Across the Spider-Verse" data-image="https://avatars.mds.yandex.net/i?id=1c8f589b8867a0641f2f3ce362a2a952031de2f0-5273802-images-thumbs&n=13">
                    <i class="far fa-heart"></i> Add to Favorite
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- –§–∏–ª—å–º 5: Interstellar -->
          <div class="col-12 col-md-6 col-lg-4 col-xl-3">
            <div class="media-card rateable-card" 
                 data-movie-id="interstellar" 
                 data-genres="adventure,drama,sci-fi" 
                 data-countries="usa,uk" 
                 data-year="2014" 
                 data-imdb-rating="8.7" 
                 data-trailer-key="HYVxnPmb15E"
                 data-description="In Earth's future, a global crop blight and second Dust Bowl are slowly rendering the planet uninhabitable. Professor Brand (Michael Caine), a brilliant NASA physicist, is working on plans to save mankind by transporting Earth's population to a new home via a wormhole. But first, Brand must send former NASA pilot Cooper (Matthew McConaughey) and a team of researchers through the wormhole and across the galaxy to find out which of three planets could be mankind's new home."
                 data-actors="Matthew McConaughey, Anne Hathaway, Jessica Chastain, Bill Irwin, Ellen Burstyn, Michael Caine"
                 data-director="Christopher Nolan">
              <div class="media-card-image">
                <img src="https://avatars.mds.yandex.net/i?id=8553d56d5fa542343440de431772b735924e05e9-16921443-images-thumbs&n=13" alt="Interstellar" class="media-img">
              </div>
              <div class="media-card-content">
                <h3 class="media-title">Interstellar (2014)</h3>
                <p class="media-director"><b>Director:</b> Christopher Nolan</p>
                <p class="media-genre"><b>Genre:</b> Adventure, Drama, Sci-Fi</p>
                <p class="media-plot">Astronauts travel through a wormhole to save humanity.</p>
                <p class="media-rating"><b>IMDb Rating:</b> ‚≠ê 8.7/10</p>
                
                <div class="user-rating">
                  <p class="user-rating-label">Your Rating:</p>
                  <div class="rating-stars">
                    <span class="star" data-value="1"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="2"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="3"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="4"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="5"><i class="fas fa-star"></i></span>
                  </div>
                  <p class="user-rating-message">Click a star to rate!</p>
                </div>
                
                <div class="media-card-actions">
                  <button class="details-btn open-movie-details">
                    <i class="fas fa-info-circle"></i> Movie Details
                  </button>
                  <button class="trailer-btn trailer-btn-inside" data-trailer-key="HYVxnPmb15E">
                    <i class="fas fa-play"></i> Watch Trailer
                  </button>
                  <button class="favorite-btn" data-title="Interstellar" data-image="https://avatars.mds.yandex.net/i?id=8553d56d5fa542343440de431772b735924e05e9-16921443-images-thumbs&n=13">
                    <i class="far fa-heart"></i> Add to Favorite
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- –§–∏–ª—å–º 6: The Dark Knight -->
          <div class="col-12 col-md-6 col-lg-4 col-xl-3">
            <div class="media-card rateable-card" 
                 data-movie-id="dark-knight" 
                 data-genres="action,crime,drama" 
                 data-countries="usa,uk" 
                 data-year="2008" 
                 data-imdb-rating="9.0" 
                 data-trailer-key="kmJLuwP3MbY"
                 data-description="When the menace known as the Joker wreaks havoc and chaos on the people of Gotham, Batman must accept one of the greatest psychological and physical tests of his ability to fight injustice."
                 data-actors="Christian Bale, Heath Ledger, Aaron Eckhart, Michael Caine, Maggie Gyllenhaal, Gary Oldman, Morgan Freeman, Monique Gabriela Curnen, Ron Dean, Cillian Murphy"
                 data-director="Christopher Nolan">
              <div class="media-card-image">
                <img src="https://avatars.mds.yandex.net/i?id=2123585a90a69b292e3bed6b13f95199f40fa11a-5236263-images-thumbs&n=13" alt="The Dark Knight" class="media-img">
              </div>
              <div class="media-card-content">
                <h3 class="media-title">The Dark Knight (2008)</h3>
                <p class="media-director"><b>Director:</b> Christopher Nolan</p>
                <p class="media-genre"><b>Genre:</b> Action, Crime, Drama</p>
                <p class="media-plot">Batman faces the Joker, who terrorizes Gotham City.</p>
                <p class="media-rating"><b>IMDb Rating:</b> ‚≠ê 9.0/10</p>
                
                <div class="user-rating">
                  <p class="user-rating-label">Your Rating:</p>
                  <div class="rating-stars">
                    <span class="star" data-value="1"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="2"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="3"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="4"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="5"><i class="fas fa-star"></i></span>
                  </div>
                  <p class="user-rating-message">Click a star to rate!</p>
                </div>
                
                <div class="media-card-actions">
                  <button class="details-btn open-movie-details">
                    <i class="fas fa-info-circle"></i> Movie Details
                  </button>
                  <button class="trailer-btn trailer-btn-inside" data-trailer-key="kmJLuwP3MbY">
                    <i class="fas fa-play"></i> Watch Trailer
                  </button>
                  <button class="favorite-btn" data-title="The Dark Knight" data-image="https://avatars.mds.yandex.net/i?id=2123585a90a69b292e3bed6b13f95199f40fa11a-5236263-images-thumbs&n=13">
                    <i class="far fa-heart"></i> Add to Favorite
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- –§–∏–ª—å–º 7: Hot Fuzz -->
          <div class="col-12 col-md-6 col-lg-4 col-xl-3">
            <div class="media-card rateable-card" 
                 data-genres="comedy,action" 
                 data-countries="uk" 
                 data-year="2007" 
                 data-trailer-key="dHyhzgm91Eo" 
                 data-imdb-rating="7.5"
                 data-description="A skilled London police officer, Nicholas Angel (Simon Pegg), is transferred to a small village that is seemingly perfect. However, he soon discovers that the village is not as idyllic as it appears, and he must partner with the oafish PC Danny Butterman (Nick Frost) to uncover a sinister conspiracy."
                 data-actors="Simon Pegg, Nick Frost, Jim Broadbent, Timothy Dalton, Billie Whitelaw, Edward Woodward"
                 data-director="Edgar Wright">
              <div class="media-card-image">
                <img src="images/hot.jpg" alt="Hot Fuzz" class="media-img">
              </div>
              <div class="media-card-content">
                <h3 class="media-title">Hot Fuzz (2007)</h3>
                <p class="media-director"><b>Director:</b> Edgar Wright</p>
                <p class="media-genre"><b>Genre:</b> Comedy, Action</p>
                <p class="media-plot">A London cop is transferred to a small village with a dark secret.</p>
                <p class="media-rating"><b>IMDb Rating:</b> ‚≠ê 7.5/10</p>
                
                <div class="user-rating">
                  <p class="user-rating-label">Your Rating:</p>
                  <div class="rating-stars">
                    <span class="star" data-value="1"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="2"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="3"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="4"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="5"><i class="fas fa-star"></i></span>
                  </div>
                  <p class="user-rating-message">Click a star to rate!</p>
                </div>
                
                <div class="media-card-actions">
                  <button class="details-btn open-movie-details">
                    <i class="fas fa-info-circle"></i> Movie Details
                  </button>
                  <button class="trailer-btn trailer-btn-inside" data-trailer-key="dHyhzgm91Eo">
                    <i class="fas fa-play"></i> Watch Trailer
                  </button>
                  <button class="favorite-btn" data-title="Hot Fuzz" data-image="images/hot.jpg">
                    <i class="far fa-heart"></i> Add to Favorite
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- –§–∏–ª—å–º 8: The Shawshank Redemption -->
          <div class="col-12 col-md-6 col-lg-4 col-xl-3">
            <div class="media-card rateable-card" 
                 data-genres="drama" 
                 data-countries="usa" 
                 data-year="1994" 
                 data-trailer-key="6hB3S9bIaco" 
                 data-imdb-rating="9.3"
                 data-description="Two imprisoned men bond over a number of years, finding solace and eventual redemption through acts of common decency."
                 data-actors="Tim Robbins, Morgan Freeman, Bob Gunton, William Sadler, Clancy Brown, Gil Bellows, Mark Rolston, James Whitmore"
                 data-director="Frank Darabont">
              <div class="media-card-image">
                <img src="https://avatars.mds.yandex.net/i?id=83a97ff25d1694350bdb0d2a570a02e609acbc04-5232905-images-thumbs&n=13" alt="The Shawshank Redemption" class="media-img">
              </div>
              <div class="media-card-content">
                <h3 class="media-title">The Shawshank Redemption (1994)</h3>
                <p class="media-director"><b>Director:</b> Frank Darabont</p>
                <p class="media-genre"><b>Genre:</b> Drama</p>
                <p class="media-plot">Two imprisoned men bond over several years.</p>
                <p class="media-rating"><b>IMDb Rating:</b> ‚≠ê 9.3/10</p>
                
                <div class="user-rating">
                  <p class="user-rating-label">Your Rating:</p>
                  <div class="rating-stars">
                    <span class="star" data-value="1"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="2"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="3"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="4"><i class="fas fa-star"></i></span>
                    <span class="star" data-value="5"><i class="fas fa-star"></i></span>
                  </div>
                  <p class="user-rating-message">Click a star to rate!</p>
                </div>
                
                <div class="media-card-actions">
                  <button class="details-btn open-movie-details">
                    <i class="fas fa-info-circle"></i> Movie Details
                  </button>
                  <button class="trailer-btn trailer-btn-inside" data-trailer-key="6hB3S9bIaco">
                    <i class="fas fa-play"></i> Watch Trailer
                  </button>
                  <button class="favorite-btn" data-title="The Shawshank Redemption" data-image="https://avatars.mds.yandex.net/i?id=83a97ff25d1694350bdb0d2a570a02e609acbc04-5232905-images-thumbs&n=13">
                    <i class="far fa-heart"></i> Add to Favorite
                  </button>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </main>

  <footer class="text-light mt-auto pt-5 pb-3 border-top border-secondary main-footer">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 mb-4 mb-lg-0 footer-section">
          <h3 class="footer-heading">About MyFlix</h3>
          <p class="footer-text">MyFlix is your homepage for trending movies. We strive to provide the best content in a simple and user-friendly format.</p>
        </div>
        <div class="col-lg-3 offset-lg-1 mb-4 mb-lg-0 footer-section">
          <h3 class="footer-heading">Quick Links</h3>
          <ul class="footer-links">
            <li><a href="index.html" class="footer-link">Home</a></li>
            <li><a href="movies.html" class="footer-link">Movies</a></li>
            <li><a href="news.html" class="footer-link">News</a></li>
            <li><a href="contact.html" class="footer-link">Contact</a></li>
            <li><a href="favorites.html" class="footer-link">Favorites</a></li>
          </ul>
        </div>
        <div class="col-lg-4 footer-section">
          <h3 class="footer-heading">Connect With Us</h3>
          <div class="contact-info">
            <p><i class="contact-icon fas fa-phone"></i> Phone: 87053915895</p>
            <p><i class="contact-icon fas fa-envelope"></i> Email: farida02.03@icloud.com</p>
          </div>
          <div class="social-links">
            <a href="https://instagram.com/farideepl" target="_blank" aria-label="Instagram" class="social-icon">
              <i class="fab fa-instagram"></i>
            </a>
            <a href="https://www.tiktok.com/@farideepl" target="_blank" aria-label="TikTok" class="social-icon">
              <i class="fab fa-tiktok"></i>
            </a>
            <a href="https://t.me/fari_davv" target="_blank" aria-label="Telegram" class="social-icon">
              <i class="fab fa-telegram-plane"></i>
            </a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        &copy; Group Members: Alua Sagyndyk, Altynay Bolatova, Farida Dovletbaeva ‚Äî 2025 MyFlix
      </div>
    </div>
  </footer>

  <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
  <div id="accessModal" class="modal">
    <div class="modal-content">
      <span class="close-button">&times;</span>
      <h3 id="modalAccessTitle">Sign In to MyFlix</h3>
      <div class="form-wrapper" id="loginPanel">
        <form id="loginForm">
          <div class="form-group">
            <label for="logEmail">Email:</label>
            <input type="email" id="logEmail" class="form-control" />
          </div>
          <div class="form-group">
            <label for="logPassword">Password:</label>
            <input type="password" id="logPassword" class="form-control" />
          </div>
          <button type="submit" class="btn btn-danger w-100 mt-3">Sign In</button>
          <div class="success-message mt-2" id="logSuccessMessage"></div>
        </form>
        <p class="switch-link mt-3 text-center">
          Don't have an account? <a href="#" id="showRegister" class="text-danger">Register</a>
        </p>
      </div>
      <div class="form-wrapper" id="registerPanel" style="display: none;">
        <form id="registrationForm">
          <div class="form-group">
            <label for="regName">Name:</label>
            <input type="text" id="regName" class="form-control" />
          </div>
          <div class="form-group">
            <label for="regEmail">Email:</label>
            <input type="email" id="regEmail" class="form-control" />
          </div>
          <div class="form-group">
            <label for="regPassword">Password:</label>
            <input type="password" id="regPassword" class="form-control" />
          </div>
          <div class="form-group">
            <label for="regConfirmPassword">Confirm Password:</label>
            <input type="password" id="regConfirmPassword" class="form-control" />
          </div>
          <button type="submit" class="btn btn-danger w-100 mt-3">Register</button>
          <div class="success-message mt-2" id="regSuccessMessage"></div>
        </form>
        <p class="switch-link mt-3 text-center">
          Already have an account? <a href="#" id="showLogin" class="text-danger">Sign In</a>
        </p>
      </div>
    </div>
  </div>

  <div id="profileModal" class="modal">
    <div class="modal-content">
      <span class="close-button" id="closeProfileModal">&times;</span>
      <h3>User Profile</h3>
      <div id="userProfileInfo">
        <p><strong>Name:</strong> <span id="profileName"></span></p>
        <p><strong>Email:</strong> <span id="profileEmail"></span></p>
      </div>
      <button class="btn btn-warning w-100 mt-3" id="logoutBtn">Log Out</button>
    </div>
  </div>

  <div class="trailer-modal" id="trailerModal">
    <div class="modal-container">
      <button class="close-trailer-btn" aria-label="Close trailer">√ó</button>
      <div id="video-container" class="video-container"></div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    function showToast(message, type = 'success') {
      const toast = document.createElement('div');
      toast.className = 'toast-message';
      toast.textContent = message;
      
      if (type === 'error') {
        toast.classList.add('error');
      } else if (type === 'info') {
        toast.classList.add('info');
      }
      
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.remove();
      }, 3000);
    }

    // –°–ò–°–¢–ï–ú–ê –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ï–í –° –ü–†–ï–î–£–°–¢–ê–ù–û–í–õ–ï–ù–ù–´–ú–ò –ö–û–ú–ú–ï–ù–¢–ê–†–ò–Ø–ú–ò
    class CommentSystem {
      constructor() {
        this.currentMovieId = null;
        this.currentMovieTitle = null;
        this.currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        this.initializePredefinedComments();
      }
      
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
      initializePredefinedComments() {
        const allComments = JSON.parse(localStorage.getItem('movieComments')) || {};
        
        // –ï—Å–ª–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –µ—â–µ –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ–º –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ
        if (Object.keys(allComments).length === 0) {
          // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è Avengers: Endgame
          allComments['avengers-endgame'] = [
            {
              id: 1,
              movieId: 'avengers-endgame',
              movieTitle: 'Avengers: Endgame',
              userId: 'john.doe@example.com',
              userName: 'John Doe',
              text: 'Amazing conclusion to the Infinity Saga! The final battle was epic and emotional. Perfect ending for Tony Stark.',
              date: '2024-01-15T10:30:00Z',
              edited: false,
              likes: 42
            },
            {
              id: 2,
              movieId: 'avengers-endgame',
              movieTitle: 'Avengers: Endgame',
              userId: 'movie.lover@example.com',
              userName: 'Movie Lover',
              text: 'Best superhero movie ever made! The time travel concept was handled brilliantly.',
              date: '2024-02-20T14:45:00Z',
              edited: false,
              likes: 28
            },
            {
              id: 3,
              movieId: 'avengers-endgame',
              movieTitle: 'Avengers: Endgame',
              userId: 'cinema.fan@example.com',
              userName: 'Cinema Fan',
              text: 'Robert Downey Jr. deserved an Oscar for this performance. "I am Iron Man" gave me chills!',
              date: '2024-03-05T09:15:00Z',
              edited: false,
              likes: 35
            }
          ];
          
          // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è Dune
          allComments['dune'] = [
            {
              id: 4,
              movieId: 'dune',
              movieTitle: 'Dune',
              userId: 'sci.fi.fan@example.com',
              userName: 'Sci-Fi Fan',
              text: 'Visually stunning masterpiece! The sandworms were absolutely incredible. Can\'t wait for Part Two!',
              date: '2024-01-25T16:20:00Z',
              edited: false,
              likes: 31
            },
            {
              id: 5,
              movieId: 'dune',
              movieTitle: 'Dune',
              userId: 'book.reader@example.com',
              userName: 'Book Reader',
              text: 'As a fan of the book, I think they did an excellent job adapting such complex material. Hans Zimmer\'s score is phenomenal.',
              date: '2024-02-10T11:10:00Z',
              edited: false,
              likes: 19
            }
          ];
          
          // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è Oppenheimer
          allComments['oppenheimer'] = [
            {
              id: 6,
              movieId: 'oppenheimer',
              movieTitle: 'Oppenheimer',
              userId: 'history.buff@example.com',
              userName: 'History Buff',
              text: 'Nolan\'s masterpiece! Cillian Murphy\'s performance was hauntingly beautiful. The Trinity test scene was unforgettable.',
              date: '2024-02-28T20:30:00Z',
              edited: false,
              likes: 47
            },
            {
              id: 7,
              movieId: 'oppenheimer',
              movieTitle: 'Oppenheimer',
              userId: 'film.critic@example.com',
              userName: 'Film Critic',
              text: 'The non-linear storytelling works perfectly. The moral dilemma is portrayed with such intensity. Best film of 2023!',
              date: '2024-03-12T15:45:00Z',
              edited: false,
              likes: 33
            }
          ];
          
          // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è The Dark Knight
          allComments['dark-knight'] = [
            {
              id: 8,
              movieId: 'dark-knight',
              movieTitle: 'The Dark Knight',
              userId: 'batman.fan@example.com',
              userName: 'Batman Fan',
              text: 'Heath Ledger\'s Joker is the best villain in cinematic history. This movie changed superhero films forever.',
              date: '2024-01-10T12:00:00Z',
              edited: false,
              likes: 56
            },
            {
              id: 9,
              movieId: 'dark-knight',
              movieTitle: 'The Dark Knight',
              userId: 'movie.expert@example.com',
              userName: 'Movie Expert',
              text: 'Perfect balance of action, drama, and psychological thriller. Christopher Nolan at his best.',
              date: '2024-02-15T18:30:00Z',
              edited: false,
              likes: 41
            }
          ];
          
          localStorage.setItem('movieComments', JSON.stringify(allComments));
        }
      }
      
      // –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —Ñ–∏–ª—å–º–∞
      getComments(movieId) {
        const allComments = JSON.parse(localStorage.getItem('movieComments')) || {};
        return allComments[movieId] || [];
      }
      
      // –ü–æ–ª—É—á–∏—Ç—å –ª–∞–π–∫–∏ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
      getCommentLikes(movieId, commentId) {
        const likesKey = `likes_${movieId}_${commentId}`;
        return JSON.parse(localStorage.getItem(likesKey)) || {
          count: 0,
          users: []
        };
      }
      
      // –î–æ–±–∞–≤–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å –ª–∞–π–∫
      toggleLike(movieId, commentId) {
        if (!this.currentUser) {
          showToast('Please login to like comments', 'error');
          document.getElementById('accessModal').style.display = 'block';
          return false;
        }
        
        const likesKey = `likes_${movieId}_${commentId}`;
        const likesData = this.getCommentLikes(movieId, commentId);
        const userIndex = likesData.users.indexOf(this.currentUser.email);
        
        if (userIndex === -1) {
          // –î–æ–±–∞–≤–ª—è–µ–º –ª–∞–π–∫
          likesData.count += 1;
          likesData.users.push(this.currentUser.email);
          showToast('Liked comment!');
        } else {
          // –£–¥–∞–ª—è–µ–º –ª–∞–π–∫
          likesData.count -= 1;
          likesData.users.splice(userIndex, 1);
          showToast('Removed like from comment', 'info');
        }
        
        localStorage.setItem(likesKey, JSON.stringify(likesData));
        return likesData.count;
      }
      
      // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –ª–∞–π–∫–Ω—É–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
      hasUserLiked(movieId, commentId) {
        if (!this.currentUser) return false;
        const likesData = this.getCommentLikes(movieId, commentId);
        return likesData.users.includes(this.currentUser.email);
      }
      
      // –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
      addComment(movieId, movieTitle, text) {
        if (!this.currentUser) {
          showToast('Please login to comment', 'error');
          document.getElementById('accessModal').style.display = 'block';
          return false;
        }
        
        const allComments = JSON.parse(localStorage.getItem('movieComments')) || {};
        if (!allComments[movieId]) {
          allComments[movieId] = [];
        }
        
        const newComment = {
          id: Date.now(),
          movieId: movieId,
          movieTitle: movieTitle,
          userId: this.currentUser.email,
          userName: this.currentUser.name,
          text: text,
          date: new Date().toISOString(),
          edited: false,
          likes: 0
        };
        
        allComments[movieId].unshift(newComment);
        localStorage.setItem('movieComments', JSON.stringify(allComments));
        
        showToast('Comment added successfully!');
        return true;
      }
      
      // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
      editComment(movieId, commentId, newText) {
        const allComments = JSON.parse(localStorage.getItem('movieComments')) || {};
        if (allComments[movieId]) {
          const commentIndex = allComments[movieId].findIndex(c => c.id === commentId);
          if (commentIndex !== -1 && allComments[movieId][commentIndex].userId === this.currentUser.email) {
            allComments[movieId][commentIndex].text = newText;
            allComments[movieId][commentIndex].edited = true;
            allComments[movieId][commentIndex].editDate = new Date().toISOString();
            localStorage.setItem('movieComments', JSON.stringify(allComments));
            showToast('Comment updated!');
            return true;
          }
        }
        return false;
      }
      
      // –£–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
      deleteComment(movieId, commentId) {
        if (!confirm('Are you sure you want to delete this comment?')) return false;
        
        const allComments = JSON.parse(localStorage.getItem('movieComments')) || {};
        if (allComments[movieId]) {
          const commentIndex = allComments[movieId].findIndex(c => c.id === commentId);
          if (commentIndex !== -1 && allComments[movieId][commentIndex].userId === this.currentUser.email) {
            allComments[movieId].splice(commentIndex, 1);
            localStorage.setItem('movieComments', JSON.stringify(allComments));
            showToast('Comment deleted');
            return true;
          }
        }
        return false;
      }
      
      // –ü–æ–ª—É—á–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª—ã –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∫–∏
      getInitials(name) {
        return name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
      }
      
      // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
      showCommentsModal(movieId, movieTitle, poster) {
        this.currentMovieId = movieId;
        this.currentMovieTitle = movieTitle;
        
        const comments = this.getComments(movieId);
        const container = document.getElementById('commentsContent');
        
        let html = `
          <div class="movie-details-header">
            <div class="movie-details-poster">
              <img src="${poster}" alt="${movieTitle}" style="max-width: 200px;">
            </div>
            <div class="movie-details-info">
              <h1 class="movie-title">${movieTitle}</h1>
              <h3 class="comments-title">Comments (${comments.length})</h3>
            </div>
          </div>
          
          <div class="comments-section">
        `;
        
        if (this.currentUser) {
          html += `
            <div class="comment-form">
              <textarea class="comment-input" id="newCommentText" placeholder="Write your comment here..."></textarea>
              <button class="submit-comment-btn" id="submitCommentBtn">Post Comment</button>
            </div>
          `;
        } else {
          html += `
            <div class="login-to-comment">
              <p>Please <a href="#" id="loginToComment">login</a> to write a comment</p>
            </div>
          `;
        }
        
        // –°–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
        html += `<div class="comments-list" id="commentsList">`;
        
        if (comments.length === 0) {
          html += `<p class="no-comments">No comments yet. Be the first to comment!</p>`;
        } else {
          comments.forEach(comment => {
            const date = new Date(comment.date);
            const formattedDate = date.toLocaleDateString('en-US', {
              year: 'numeric',
              month: 'short',
              day: 'numeric',
              hour: '2-digit',
              minute: '2-digit'
            });
            
            const isOwnComment = this.currentUser && comment.userId === this.currentUser.email;
            const hasLiked = this.hasUserLiked(movieId, comment.id);
            const likesData = this.getCommentLikes(movieId, comment.id);
            const likesCount = likesData.count || comment.likes || 0;
            const initials = this.getInitials(comment.userName);
            
            html += `
              <div class="comment-item ${isOwnComment ? 'current-user' : 'other-user'}" data-comment-id="${comment.id}">
                <div class="comment-header">
                  <div class="comment-author-avatar">
                    <div class="avatar-icon">${initials}</div>
                    <span class="comment-author">${comment.userName}</span>
                    ${isOwnComment ? '<span style="color: #ff4444; font-size: 0.8rem;">(You)</span>' : ''}
                  </div>
                  <span class="comment-date">${formattedDate} ${comment.edited ? '(edited)' : ''}</span>
                </div>
                <div class="comment-text">${comment.text}</div>
                <div class="comment-actions">
                  <button class="like-btn ${hasLiked ? 'liked' : ''}" data-comment-id="${comment.id}">
                    <i class="fas fa-heart"></i>
                    <span class="likes-count">${likesCount}</span>
                  </button>
                  ${isOwnComment ? `
                    <button class="edit-comment-btn" data-comment-id="${comment.id}">
                      <i class="fas fa-edit"></i> Edit
                    </button>
                    <button class="delete-comment-btn" data-comment-id="${comment.id}">
                      <i class="fas fa-trash"></i> Delete
                    </button>
                  ` : ''}
                </div>
              </div>
            `;
          });
        }
        
        html += `</div></div>`;
        container.innerHTML = html;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        document.getElementById('commentsModal').style.display = 'block';
        
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        this.addCommentsEventListeners();
      }
      
      addCommentsEventListeners() {
        // –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
        const submitBtn = document.getElementById('submitCommentBtn');
        if (submitBtn) {
          submitBtn.addEventListener('click', () => {
            const textArea = document.getElementById('newCommentText');
            if (textArea.value.trim()) {
              if (this.addComment(this.currentMovieId, this.currentMovieTitle, textArea.value.trim())) {
                textArea.value = '';
                // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
                const poster = document.querySelector('#commentsContent img').src;
                this.showCommentsModal(this.currentMovieId, this.currentMovieTitle, poster);
              }
            } else {
              showToast('Please write a comment', 'error');
            }
          });
        }
        
        // –í–æ–π—Ç–∏ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        const loginLink = document.getElementById('loginToComment');
        if (loginLink) {
          loginLink.addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('commentsModal').style.display = 'none';
            document.getElementById('accessModal').style.display = 'block';
          });
        }
        
        // –õ–∞–π–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
        document.querySelectorAll('.like-btn').forEach(btn => {
          btn.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            const commentId = parseInt(btn.dataset.commentId);
            const newLikesCount = this.toggleLike(this.currentMovieId, commentId);
            
            if (newLikesCount !== false) {
              // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
              const likesCountSpan = btn.querySelector('.likes-count');
              if (likesCountSpan) {
                likesCountSpan.textContent = newLikesCount;
              }
              
              // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
              btn.classList.toggle('liked');
              
              // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É
              const icon = btn.querySelector('i');
              if (btn.classList.contains('liked')) {
                icon.className = 'fas fa-heart';
              } else {
                icon.className = 'fas fa-heart';
              }
            }
          });
        });
        
        // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
        document.querySelectorAll('.edit-comment-btn').forEach(btn => {
          btn.addEventListener('click', (e) => {
            const commentId = parseInt(btn.dataset.commentId);
            const commentItem = btn.closest('.comment-item');
            const commentText = commentItem.querySelector('.comment-text').textContent;
            
            // –ó–∞–º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
            commentItem.innerHTML = `
              <div class="comment-header">
                <div class="comment-author-avatar">
                  <div class="avatar-icon">${this.getInitials(this.currentUser.name)}</div>
                  <span class="comment-author">${this.currentUser.name}</span>
                  <span style="color: #ff4444; font-size: 0.8rem;">(You)</span>
                </div>
                <span class="comment-date">Editing comment...</span>
              </div>
              <textarea class="edit-comment-input" id="editCommentInput">${commentText}</textarea>
              <div class="comment-actions">
                <button class="btn btn-success" id="saveEditBtn">Save</button>
                <button class="btn btn-secondary" id="cancelEditBtn">Cancel</button>
              </div>
            `;
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            document.getElementById('saveEditBtn').addEventListener('click', () => {
              const newText = document.getElementById('editCommentInput').value.trim();
              if (newText) {
                if (this.editComment(this.currentMovieId, commentId, newText)) {
                  const poster = document.querySelector('#commentsContent img').src;
                  this.showCommentsModal(this.currentMovieId, this.currentMovieTitle, poster);
                }
              } else {
                showToast('Comment cannot be empty', 'error');
              }
            });
            
            document.getElementById('cancelEditBtn').addEventListener('click', () => {
              const poster = document.querySelector('#commentsContent img').src;
              this.showCommentsModal(this.currentMovieId, this.currentMovieTitle, poster);
            });
          });
        });
        
        // –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
        document.querySelectorAll('.delete-comment-btn').forEach(btn => {
          btn.addEventListener('click', (e) => {
            const commentId = parseInt(btn.dataset.commentId);
            if (this.deleteComment(this.currentMovieId, commentId)) {
              const poster = document.querySelector('#commentsContent img').src;
              this.showCommentsModal(this.currentMovieId, this.currentMovieTitle, poster);
            }
          });
        });
      }
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
    const commentSystem = new CommentSystem();
    
    // –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–µ—Ç–∞–ª–µ–π —Ñ–∏–ª—å–º–∞
    function openMovieDetails(card) {
      const title = card.querySelector('.media-title').textContent;
      const poster = card.querySelector('.media-img').src;
      const description = card.dataset.description;
      const actors = card.dataset.actors;
      const director = card.dataset.director;
      const year = card.dataset.year;
      const rating = card.dataset.imdbRating;
      const trailerKey = card.dataset.trailerKey;
      const genres = card.dataset.genres;
      
      // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
      document.querySelectorAll('.media-card').forEach(c => c.classList.remove('active'));
      card.classList.add('active');
      
      // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
      const content = document.getElementById('movieDetailsContent');
      content.innerHTML = `
        <div class="movie-details-header">
          <div class="movie-details-poster">
            <img src="${poster}" alt="${title}">
          </div>
          <div class="movie-details-info">
            <h1 class="movie-title">${title}</h1>
            <div class="movie-meta">
              <p><strong>Director:</strong> ${director}</p>
              <p><strong>Year:</strong> ${year}</p>
              <p><strong>Genres:</strong> ${genres.split(',').map(g => g.charAt(0).toUpperCase() + g.slice(1)).join(', ')}</p>
            </div>
            <div class="movie-rating-badge">
              IMDb Rating: ‚≠ê ${rating}/10
            </div>
            <div class="movie-description">
              <h3>Plot Summary</h3>
              <p>${description}</p>
            </div>
            <div class="movie-actors">
              <h3 class="actors-title">Cast</h3>
              <p class="actors-list">${actors}</p>
            </div>
            <div class="movie-actions">
              <button class="btn btn-danger" id="watchTrailerDetails" data-trailer-key="${trailerKey}">
                <i class="fas fa-play"></i> Watch Trailer
              </button>
              <button class="btn btn-outline-light" id="closeDetailsBtn">
                <i class="fas fa-times"></i> Close
              </button>
              <button class="comments-btn" id="viewCommentsBtn">
                <i class="fas fa-comments"></i> View Comments
              </button>
            </div>
          </div>
        </div>
      `;
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
      document.getElementById('movieDetailsModal').style.display = 'block';
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
      document.getElementById('watchTrailerDetails').addEventListener('click', function() {
        openTrailer(this.dataset.trailerKey);
      });
      
      document.getElementById('closeDetailsBtn').addEventListener('click', function() {
        closeMovieDetails();
      });
      
      // –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
      document.getElementById('viewCommentsBtn').addEventListener('click', function() {
        const movieId = card.dataset.movieId || title.replace(/\s+/g, '-').toLowerCase();
        // –ó–∞–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        document.getElementById('movieDetailsModal').style.display = 'none';
        // –û—Ç–∫—Ä—ã–≤–∞–µ–º –æ–∫–Ω–æ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
        commentSystem.showCommentsModal(movieId, title, poster);
      });
    }
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –¥–µ—Ç–∞–ª–µ–π —Ñ–∏–ª—å–º–∞
    function closeMovieDetails() {
      document.getElementById('movieDetailsModal').style.display = 'none';
      document.querySelectorAll('.media-card').forEach(c => c.classList.remove('active'));
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Ç—Ä–µ–π–ª–µ—Ä–∞
    function openTrailer(trailerKey) {
      const modal = document.getElementById('trailerModal');
      const videoContainer = document.getElementById('video-container');
      
      videoContainer.innerHTML = `
        <iframe 
          width="100%" 
          height="100%" 
          src="https://www.youtube.com/embed/${trailerKey}?autoplay=1" 
          frameborder="0" 
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
          allowfullscreen>
        </iframe>
      `;
      
      modal.style.display = 'flex';
      
      document.querySelector('.close-trailer-btn').onclick = function() {
        modal.style.display = 'none';
        videoContainer.innerHTML = '';
      };
      
      modal.onclick = function(e) {
        if (e.target === modal) {
          modal.style.display = 'none';
          videoContainer.innerHTML = '';
        }
      };
    }

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
    document.getElementById('closeCommentsModal').addEventListener('click', function() {
      document.getElementById('commentsModal').style.display = 'none';
    });
    
    document.getElementById('commentsModal').addEventListener('click', function(e) {
      if (e.target === this) {
        this.style.display = 'none';
      }
    });

    document.addEventListener('DOMContentLoaded', function() {
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
      const user = JSON.parse(localStorage.getItem('currentUser'));
      if (user) {
        commentSystem.currentUser = user;
        // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
        const signUpBtn = document.getElementById('openAccessModal');
        const profileBtn = document.getElementById('profileBtn');
        if (signUpBtn && profileBtn) {
          signUpBtn.style.display = 'none';
          profileBtn.style.display = 'inline-block';
          profileBtn.innerHTML = `<i class="fas fa-user"></i> ${user.name}`;
        }
      }
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—ã—Ö–æ–¥–∞
      const logoutBtn = document.getElementById('logoutBtn');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', function() {
          localStorage.removeItem('currentUser');
          commentSystem.currentUser = null;
          showToast('Logged out successfully');
          document.getElementById('profileModal').style.display = 'none';
          
          // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
          const signUpBtn = document.getElementById('openAccessModal');
          const profileBtn = document.getElementById('profileBtn');
          if (signUpBtn && profileBtn) {
            signUpBtn.style.display = 'inline-block';
            profileBtn.style.display = 'none';
          }
        });
      }
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ "Movie Details"
      document.querySelectorAll('.open-movie-details').forEach(btn => {
        btn.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          const card = this.closest('.media-card');
          openMovieDetails(card);
        });
      });
      
      // –ó–∞–∫—Ä—ã—Ç–∏–µ –¥–µ—Ç–∞–ª–µ–π —Ñ–∏–ª—å–º–∞
      document.getElementById('closeDetailsModal').addEventListener('click', closeMovieDetails);
      document.getElementById('movieDetailsModal').addEventListener('click', function(e) {
        if (e.target === this) {
          closeMovieDetails();
        }
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ç—Ä–µ–π–ª–µ—Ä–æ–≤
      document.querySelectorAll('.trailer-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          const trailerKey = this.dataset.trailerKey;
          openTrailer(trailerKey);
        });
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
      document.addEventListener('click', function(e) {
        if (e.target.closest('.favorite-btn')) {
          e.preventDefault();
          e.stopPropagation();
          const btn = e.target.closest('.favorite-btn');
          const title = btn.dataset.title;
          const image = btn.dataset.image;
          
          const isAdded = btn.innerHTML.includes('fas fa-heart');
          
          if (isAdded) {
            btn.innerHTML = '<i class="far fa-heart"></i> Add to Favorite';
            showToast(`Removed "${title}" from favorites`, 'info');
          } else {
            btn.innerHTML = '<i class="fas fa-heart"></i> Added to Favorite';
            showToast(`Added "${title}" to favorites!`);
          }
          
          let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
          const movieData = { title, image };
          
          if (isAdded) {
            favorites = favorites.filter(movie => movie.title !== title);
          } else {
            favorites.push(movieData);
          }
          
          localStorage.setItem('favorites', JSON.stringify(favorites));
        }
      });
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
      document.querySelectorAll('.favorite-btn').forEach(btn => {
        const title = btn.dataset.title;
        const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
        const isFavorite = favorites.some(movie => movie.title === title);
        
        if (isFavorite) {
          btn.innerHTML = '<i class="fas fa-heart"></i> Added to Favorite';
        }
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–∞
      document.querySelectorAll('.star').forEach(star => {
        star.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          const rating = this.dataset.value;
          const movieTitle = this.closest('.media-card').querySelector('.media-title').textContent;
          
          localStorage.setItem(`rating_${movieTitle}`, rating);
          
          const stars = this.parentElement.querySelectorAll('.star');
          stars.forEach((s, index) => {
            if (index < rating) {
              s.innerHTML = '<i class="fas fa-star"></i>';
              s.style.color = '#ffcc00';
            } else {
              s.innerHTML = '<i class="fas fa-star"></i>';
              s.style.color = '#666';
            }
          });
          
          showToast(`Rated "${movieTitle}" ${rating} stars!`);
        });
      });
      
      // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
      document.querySelectorAll('.rateable-card').forEach(card => {
        const movieTitle = card.querySelector('.media-title').textContent;
        const savedRating = localStorage.getItem(`rating_${movieTitle}`);
        if (savedRating) {
          const stars = card.querySelectorAll('.star');
          stars.forEach((star, index) => {
            if (index < savedRating) {
              star.innerHTML = '<i class="fas fa-star"></i>';
              star.style.color = '#ffcc00';
            }
          });
        }
      });
    });
  </script>
  
  <script src="js/auth.js"></script>
  <script src="js/theme-switcher.js"></script>
  <script src="js/search.js"></script>
  <script src="js/rating.js"></script>
  <script src="js/navKeyboard.js"></script>
  <script src="js/filtering.js"></script>
  <script src="js/favorites.js" defer></script>
  <script src="js/trailer.js"></script>
</body>
</html>